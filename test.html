<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body, #map {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
      var map;

      function initialize() {
        var mapOptions = {
          zoom: 2,
          center: {lat: -33.865427, lng: 151.196123},
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        map = new google.maps.Map(document.getElementById('map'),
              mapOptions);

        // Create a <script> tag and set the USGS URL as the source.
        var script = document.createElement('script');

        var openWeatherMapKey = "44db6a862fba0b067b1930da0d769e98";
        script.src = "http://api.openweathermap.org/data/2.5/weather?q="
			  + "mountain view"
              + "&format=json"
			  + "&appid="
			  + openWeatherMapKey;
        //script.src = "http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=44db6a862fba0b067b1930da0d769e98";
        //document.getElementsByTagName('head')[0].appendChild(script);
      }

      function eqfeed_callback(results) {
    	  console.log(results);
    	  //map.data.addGeoJson(geoJSON);
      }

      var jsonToGeoJson = function (weatherItem) {
    	    var feature = {
    	      type: "Feature",
    	      properties: {
    	        city: weatherItem.name,
    	        weather: weatherItem.weather[0].main,
    	        temperature: weatherItem.main.temp,
    	        min: weatherItem.main.temp_min,
    	        max: weatherItem.main.temp_max,
    	        humidity: weatherItem.main.humidity,
    	        pressure: weatherItem.main.pressure,
    	        windSpeed: weatherItem.wind.speed,
    	        windDegrees: weatherItem.wind.deg,
    	        windGust: weatherItem.wind.gust,
    	        icon: "http://openweathermap.org/img/w/"
    	              + weatherItem.weather[0].icon  + ".png",
    	        coordinates: [weatherItem.coord.lon, weatherItem.coord.lat]
    	      },
    	      geometry: {
    	        type: "Point",
    	        coordinates: [weatherItem.coord.lon, weatherItem.coord.lat]
    	      }
    	    };
    	    // Set the custom marker icon
    	    map.data.setStyle(function(feature) {
    	      return {
    	        icon: {
    	          url: feature.getProperty('icon'),
    	          anchor: new google.maps.Point(25, 25)
    	        }
    	      };
    	    });

    	    // returns object
    	    return feature;
    	  };
      // Call the initialize function after the page has finished loading
      google.maps.event.addDomListener(window, 'load', initialize);

  </script>
  </head>
  <body>
    <div id="map"></div>
  </body>
</html>